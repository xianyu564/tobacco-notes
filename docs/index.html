<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Tobacco Notesï½œçƒŸè‰ç¬”è®°</title>
  
  <!-- SEO Meta -->
  <meta name="description" content="è½»é‡ã€å¼€æ”¾çš„çƒŸè‰å“é‰´ç¬”è®°ï¼›ä¸€é”®ä¸€å¥è¯æŠ•ç¨¿ï¼›æµè§ˆæœ€æ–°/å…¨éƒ¨ç¬”è®°ï¼›æ”¯æŒèµåŠ©ã€‚" />
  <meta name="keywords" content="çƒŸè‰,å“é‰´,ç¬”è®°,é›ªèŒ„,çº¸çƒŸ,çƒŸæ–—,æ‰‹å·,å”‡çƒŸ,ç”µå­çƒŸ" />
  <meta name="author" content="Contributors" />
  <meta name="robots" content="index, follow" />
  
  <!-- Open Graph -->
  <meta property="og:title" content="Tobacco Notesï½œçƒŸè‰ç¬”è®°" />
  <meta property="og:description" content="ä¸€å¥è¯æŠ•ç¨¿ã€è½»é‡æµè§ˆã€å‹å¥½ç´¢å¼•ï¼›ä¸ºçˆ±å‘ç”µçš„çƒŸè‰å“é‰´è®°å½•ä¸åˆ†äº«ã€‚" />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://xianyu564.github.io/tobacco-notes/" />
  <meta property="og:image" content="./assets/og-image.png" />
  <meta property="og:image:width" content="1200" />
  <meta property="og:image:height" content="630" />
  <meta property="og:locale" content="zh_CN" />
  <meta property="og:site_name" content="Tobacco Notes" />
  
  <!-- Twitter Card -->
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="Tobacco Notesï½œçƒŸè‰ç¬”è®°" />
  <meta name="twitter:description" content="ä¸€å¥è¯æŠ•ç¨¿ã€è½»é‡æµè§ˆã€å‹å¥½ç´¢å¼•ï¼›ä¸ºçˆ±å‘ç”µçš„çƒŸè‰å“é‰´è®°å½•ä¸åˆ†äº«ã€‚" />
  <meta name="twitter:image" content="./assets/og-image.png" />
  
  <!-- Icons -->
  <link rel="icon" type="image/png" sizes="32x32" href="./assets/favicon-32x32.png" />
  <link rel="icon" type="image/png" sizes="16x16" href="./assets/favicon-16x16.png" />
  <link rel="apple-touch-icon" sizes="180x180" href="./assets/apple-touch-icon.png" />
  <link rel="manifest" href="./assets/site.webmanifest" />
  <meta name="theme-color" content="#ff4d6d" />
  
  <!-- Styles & Feeds -->
  <link rel="stylesheet" href="./styles.css" />
  
  <!-- Feed Discovery (Enhanced) -->
  <link rel="alternate" type="application/rss+xml" title="RSS Feed - çƒŸè‰ç¬”è®°æœ€æ–°æ›´æ–°" href="./feed.xml" />
  <link rel="alternate" type="application/atom+xml" title="Atom Feed - çƒŸè‰ç¬”è®°æœ€æ–°æ›´æ–°" href="./feed.atom" />
  <link rel="alternate" type="application/json" title="JSON Feed - çƒŸè‰ç¬”è®°æœ€æ–°æ›´æ–°" href="./feed.json" />
  
  <!-- Feed Icon -->
  <link rel="icon" type="image/svg+xml" href="./assets/feed-icon.svg" sizes="any" />
  
  <!-- Additional SEO Meta Tags -->
  <meta name="application-name" content="Tobacco Notes" />
  <meta name="msapplication-TileColor" content="#ff4d6d" />
  <meta name="msapplication-config" content="./assets/browserconfig.xml" />
  <meta name="format-detection" content="telephone=no" />
  <meta name="mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="default" />
  <meta name="apple-mobile-web-app-title" content="Tobacco Notes" />
  
  <!-- Canonical URL -->
  <link rel="canonical" href="https://xianyu564.github.io/tobacco-notes/" />
  
  <!-- Feed-specific Meta Tags -->
  <meta name="feed-version" content="2.0" />
  <meta name="feed-generator" content="Tobacco Notes Feed Generator v2.0" />
  <meta name="syndication-right" content="Open" />
  <meta name="rating" content="General" />
  
  <!-- èµ„æºæç¤º -->
  <!-- é¢„åŠ è½½å…³é”®èµ„æº -->
  <link rel="preload" href="./styles.css" as="style">
  <link rel="preload" href="./js/theme.js" as="script">
  <link rel="preload" href="./js/search.js" as="script">
  <link rel="preload" href="./assets/favicon-32x32.png" as="image">
  
  <!-- DNS é¢„è§£æå’Œé¢„è¿æ¥ -->
  <link rel="preconnect" href="https://api.github.com">
  <link rel="preconnect" href="https://raw.githubusercontent.com">
  <link rel="dns-prefetch" href="https://api.github.com">
  <link rel="dns-prefetch" href="https://raw.githubusercontent.com">
  
  <!-- é¢„è·å–ä¸‹ä¸€é¡µå¯èƒ½éœ€è¦çš„èµ„æº -->
  <link rel="prefetch" href="./data/latest.json">
  <link rel="prefetch" href="./data/index.json">
  
  <!-- å…³é”®CSSå†…è” -->
  <style>
    /* æœ€å°å¿…è¦æ ·å¼ï¼Œç”¨äºé¦–å±æ¸²æŸ“ */
    :root {
      --primary-color: #ff4d6d;
      --text-color: #333;
      --bg-color: #fff;
    }
    body {
      margin: 0;
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
      line-height: 1.5;
      color: var(--text-color);
      background: var(--bg-color);
    }
    .nav {
      position: fixed;
      top: 0;
      width: 100%;
      background: var(--bg-color);
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
      z-index: 100;
    }
    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 1rem;
    }
    @media (prefers-color-scheme: dark) {
      :root {
        --text-color: #fff;
        --bg-color: #1a1a1a;
      }
    }
  </style>
  
  <!-- å¼‚æ­¥åŠ è½½å®Œæ•´æ ·å¼è¡¨ -->
  <link rel="stylesheet" href="./styles.css" media="print" onload="this.media='all'">
  <noscript><link rel="stylesheet" href="./styles.css"></noscript>
  
  <!-- æ ¸å¿ƒè„šæœ¬ -->
  <script defer src="./js/performance.js"></script>
  <script defer src="./js/theme.js"></script>
  <script defer src="./js/search.js"></script>
  <script defer src="./js/notes.js"></script>
  <script defer src="./js/image-optimization.js"></script>
  <script defer src="./js/sponsor.js"></script>

  <!-- éå…³é”®è„šæœ¬ -->
  <script defer src="./js/shortcuts.js"></script>
  <script defer src="./js/share.js"></script>
  <script defer src="./js/animations.js"></script>
  <script defer src="./js/mobile.js"></script>
  <script defer src="./js/a11y.js"></script>

  <!-- ç»“æ„åŒ–æ•°æ® (JSON-LD) -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "WebSite",
    "name": "Tobacco Notesï½œçƒŸè‰ç¬”è®°",
    "description": "è½»é‡ã€å¼€æ”¾çš„çƒŸè‰å“é‰´ç¬”è®°ï¼›ä¸€é”®ä¸€å¥è¯æŠ•ç¨¿ï¼›æµè§ˆæœ€æ–°/å…¨éƒ¨ç¬”è®°ã€‚",
    "url": "https://xianyu564.github.io/tobacco-notes/",
    "image": "https://xianyu564.github.io/tobacco-notes/assets/og-image.png",
    "author": {
      "@type": "Organization",
      "name": "Contributors",
      "url": "https://xianyu564.github.io/tobacco-notes/contributors.md"
    },
    "publisher": {
      "@type": "Organization", 
      "name": "Tobacco Notes",
      "logo": {
        "@type": "ImageObject",
        "url": "https://xianyu564.github.io/tobacco-notes/assets/og-image.png"
      }
    },
    "mainEntity": {
      "@type": "Blog",
      "name": "Tobacco Notes",
      "description": "ä¸“ä¸šçš„çƒŸè‰å“é‰´ç¬”è®°ä¸è¯„æµ‹åˆ†äº«å¹³å°",
      "inLanguage": "zh-CN",
      "copyrightHolder": {
        "@type": "Organization",
        "name": "Contributors"
      },
      "license": "https://creativecommons.org/licenses/by/4.0/"
    },
    "potentialAction": {
      "@type": "SearchAction",
      "target": "https://xianyu564.github.io/tobacco-notes/?q={search_term_string}",
      "query-input": "required name=search_term_string"
    },
    "sameAs": [
      "https://github.com/xianyu564/tobacco-notes"
    ]
  }
  </script>

  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "DataFeed",
    "name": "Tobacco Notes RSS Feed",
    "description": "Latest tobacco tasting notes and reviews",
    "url": "https://xianyu564.github.io/tobacco-notes/feed.xml",
    "dataFeedElement": [
      {
        "@type": "DataFeedItem",
        "name": "RSS Feed",
        "url": "https://xianyu564.github.io/tobacco-notes/feed.xml",
        "encodingFormat": "application/rss+xml"
      },
      {
        "@type": "DataFeedItem", 
        "name": "Atom Feed",
        "url": "https://xianyu564.github.io/tobacco-notes/feed.atom",
        "encodingFormat": "application/atom+xml"
      },
      {
        "@type": "DataFeedItem",
        "name": "JSON Feed", 
        "url": "https://xianyu564.github.io/tobacco-notes/feed.json",
        "encodingFormat": "application/json"
      }
    ]
  }
  </script>
</head>
<body>
  <!-- å›ºå®šå¯¼èˆªæ  -->
  <nav class="nav" role="navigation" aria-label="ä¸»å¯¼èˆª">
    <a href="./" class="nav-logo" aria-label="è¿”å›é¦–é¡µ">Tobacco Notes</a>
    <div class="nav-links">
      <button class="btn theme-toggle" aria-label="åˆ‡æ¢ä¸»é¢˜">ğŸŒ“</button>
      <a href="#latest" class="btn" aria-label="æŸ¥çœ‹æœ€æ–°ç¬”è®°">æœ€æ–°ç¬”è®°</a>
      <a href="#categories" class="btn" aria-label="æŒ‰åˆ†ç±»æµè§ˆç¬”è®°">åˆ†ç±»æµè§ˆ</a>
      <a href="#tags" class="btn" aria-label="æŒ‰æ ‡ç­¾æµè§ˆç¬”è®°">æ ‡ç­¾èšåˆ</a>
      <button class="btn share-button" data-platform="native" aria-label="åˆ†äº«é¡µé¢">åˆ†äº«</button>
      <a id="link-one" class="btn primary" href="#" aria-label="å¿«é€Ÿæäº¤ä¸€å¥è¯ç¬”è®°">ä¸€å¥è¯æŠ•ç¨¿</a>
    </div>
  </nav>

  <header class="site-header animate">
    <h1>Tobacco Notesï½œçƒŸè‰ç¬”è®°</h1>
    <p>è®°å½•æ¯ä¸€æ¬¡å“é‰´ï¼Œåˆ†äº«ç‹¬ç‰¹ä½“éªŒ</p>
    <div class="cta">
      <a id="link-quick" class="btn primary" href="#">ä¸€å¥è¯æŠ•ç¨¿</a>
      <a id="link-form" class="btn" href="#">æ ‡å‡†è¡¨å•</a>
      <a id="link-repo" class="btn" href="#" target="_blank" rel="noopener">åœ¨ GitHub æŸ¥çœ‹</a>
    </div>
  </header>

  <main class="container" role="main" aria-label="ä¸»è¦å†…å®¹">
    <section 
      id="latest" 
      class="animate" 
      aria-labelledby="latest-title"
      data-lazy-scripts="./js/shortcuts.js,./js/share.js"
    >
      <h2 id="latest-title">
        <span>æœ€æ–°ç¬”è®°</span>
        <span class="shortcut-hint" aria-label="ä½¿ç”¨å¿«æ·é”® Command+K æ‰“å¼€æœç´¢">âŒ˜K æœç´¢</span>
      </h2>
      <div class="search" role="search">
        <input 
          id="q" 
          type="search" 
          placeholder="æœç´¢æ ‡é¢˜/åˆ†ç±»/ä½œè€…..." 
          aria-label="æœç´¢ç¬”è®°"
          aria-expanded="false"
          aria-controls="search-results"
          aria-describedby="search-desc" 
        />
        <div id="search-desc" class="sr-only">è¾“å…¥å…³é”®è¯æœç´¢ç¬”è®°ï¼Œä½¿ç”¨ä¸Šä¸‹ç®­å¤´é”®é€‰æ‹©ç»“æœï¼Œå›è½¦é”®ç¡®è®¤</div>
        
        <!-- æœç´¢ç­›é€‰å™¨ -->
        <div class="search-filters" aria-label="æœç´¢ç­›é€‰é€‰é¡¹">
          <div class="filter-group">
            <label for="category-filter" class="filter-label">åˆ†ç±»ï¼š</label>
            <select id="category-filter" class="filter-select" aria-label="æŒ‰åˆ†ç±»ç­›é€‰">
              <option value="">å…¨éƒ¨åˆ†ç±»</option>
              <option value="cigars">é›ªèŒ„ (Cigars)</option>
              <option value="cigarettes">çº¸çƒŸ (Cigarettes)</option>
              <option value="pipe">çƒŸæ–— (Pipe)</option>
              <option value="ryo">æ‰‹å· (RYO)</option>
              <option value="snus">é¼»çƒŸ (Snus)</option>
              <option value="ecig">ç”µå­çƒŸ (E-cig)</option>
            </select>
          </div>
          
          <div class="filter-group">
            <label for="date-filter" class="filter-label">æ—¥æœŸï¼š</label>
            <select id="date-filter" class="filter-select" aria-label="æŒ‰æ—¥æœŸç­›é€‰">
              <option value="">å…¨éƒ¨æ—¥æœŸ</option>
              <option value="week">æœ€è¿‘ä¸€å‘¨</option>
              <option value="month">æœ€è¿‘ä¸€æœˆ</option>
              <option value="3months">æœ€è¿‘ä¸‰æœˆ</option>
              <option value="year">æœ€è¿‘ä¸€å¹´</option>
            </select>
          </div>
          
          <div class="filter-group">
            <label for="rating-filter" class="filter-label">è¯„åˆ†ï¼š</label>
            <select id="rating-filter" class="filter-select" aria-label="æŒ‰è¯„åˆ†ç­›é€‰">
              <option value="">å…¨éƒ¨è¯„åˆ†</option>
              <option value="high">é«˜åˆ† (â‰¥4/5 æˆ– â‰¥80/100)</option>
              <option value="medium">ä¸­ç­‰ (3-3.9/5 æˆ– 60-79/100)</option>
              <option value="low">ä½åˆ† (<3/5 æˆ– <60/100)</option>
            </select>
          </div>
          
          <button id="clear-filters" class="btn filter-clear" aria-label="æ¸…é™¤æ‰€æœ‰ç­›é€‰">
            æ¸…é™¤ç­›é€‰
          </button>
        </div>
        
        <div 
          id="search-results"
          class="search-dropdown" 
          role="listbox" 
          aria-label="æœç´¢ç»“æœ"
          hidden
        ></div>
      </div>
      <ul 
        id="latest-list" 
        class="note-list"
        role="list"
        aria-label="æœ€æ–°ç¬”è®°åˆ—è¡¨"
      ></ul>
      <div class="list-pagination">
        <button 
          class="btn load-more" 
          hidden
          aria-label="åŠ è½½æ›´å¤šç¬”è®°"
        >åŠ è½½æ›´å¤š</button>
      </div>
    </section>

    <section 
      id="categories" 
      class="animate" 
      aria-labelledby="categories-title"
      data-lazy-scripts="./js/animations.js"
    >
      <h2 id="categories-title">æŒ‰åˆ†ç±»æµè§ˆ</h2>
      <div 
        id="cat-summary" 
        class="cat-summary"
        role="navigation"
        aria-label="åˆ†ç±»å¿«é€Ÿå¯¼èˆª"
      ></div>
      <div 
        id="by-category" 
        class="categories"
        role="region"
        aria-label="åˆ†ç±»ç¬”è®°åˆ—è¡¨"
      ></div>
    </section>

    <section 
      id="tags" 
      class="animate" 
      aria-labelledby="tags-title"
      data-lazy-scripts="./js/tags.js"
    >
      <h2 id="tags-title">æ ‡ç­¾èšåˆï½œTag Aggregation</h2>
      <div 
        class="tag-summary"
        role="region"
        aria-label="æ ‡ç­¾ç»Ÿè®¡ä¿¡æ¯"
      >
        <div id="tag-stats" class="tag-stats">
          <span class="stat-item">
            <span class="stat-number" id="total-tags">-</span>
            <span class="stat-label">ä¸ªæ ‡ç­¾</span>
          </span>
          <span class="stat-item">
            <span class="stat-number" id="tagged-notes">-</span>
            <span class="stat-label">ç¯‡ç¬”è®°</span>
          </span>
        </div>
      </div>

      <div class="tag-sections">
        <!-- Featured tag collections -->
        <div 
          id="featured-tags" 
          class="featured-tags"
          role="region"
          aria-label="ç²¾é€‰æ ‡ç­¾é›†åˆ"
        >
          <h3>ç²¾é€‰æ ‡ç­¾ | Featured Tags</h3>
          <div id="featured-collections" class="featured-collections">
            <!-- Dynamic content loaded by JS -->
          </div>
        </div>

        <!-- Popular tags cloud -->
        <div 
          id="popular-tags" 
          class="popular-tags"
          role="region"
          aria-label="çƒ­é—¨æ ‡ç­¾äº‘"
        >
          <h3>çƒ­é—¨æ ‡ç­¾ | Popular Tags</h3>
          <div id="tag-cloud" class="tag-cloud">
            <!-- Dynamic content loaded by JS -->
          </div>
        </div>

        <!-- Tag filtering and browsing -->
        <div 
          id="tag-filter" 
          class="tag-filter"
          role="region"
          aria-label="æŒ‰æ ‡ç­¾ç­›é€‰"
        >
          <h3>æŒ‰æ ‡ç­¾æµè§ˆ | Browse by Tags</h3>
          <div class="tag-filter-controls">
            <input 
              type="text" 
              id="tag-search"
              placeholder="æœç´¢æ ‡ç­¾..."
              aria-label="æœç´¢æ ‡ç­¾"
              class="tag-search-input"
            />
            <select 
              id="tag-category-filter"
              aria-label="æŒ‰åˆ†ç±»ç­›é€‰æ ‡ç­¾"
              class="tag-category-select"
            >
              <option value="">å…¨éƒ¨åˆ†ç±»</option>
              <option value="cigars">é›ªèŒ„ (Cigars)</option>
              <option value="cigarettes">çº¸çƒŸ (Cigarettes)</option>
              <option value="pipe">çƒŸæ–— (Pipe)</option>
              <option value="ryo">æ‰‹å· (RYO)</option>
              <option value="snus">é¼»çƒŸ (Snus)</option>
              <option value="ecig">ç”µå­çƒŸ (E-cig)</option>
            </select>
          </div>
          <div id="filtered-tag-results" class="filtered-tag-results">
            <!-- Dynamic content loaded by JS -->
          </div>
        </div>
      </div>
    </section>

    <section 
      id="templates" 
      class="animate" 
      aria-labelledby="templates-title"
      data-lazy-scripts="./js/mobile.js"
    >
      <h2 id="templates-title">æ¨¡æ¿ä¸æŒ‡å¼•</h2>
      <div 
        class="template-grid"
        role="list"
        aria-label="ç¬”è®°æ¨¡æ¿åˆ—è¡¨"
      >
        <div class="template-card" role="listitem">
          <h3>é›ªèŒ„ï½œCigars</h3>
          <p>é€‚ç”¨äºï¼šå¤å·´/éå¤å·´é›ªèŒ„å“é‰´è®°å½•</p>
          <a 
            href="../notes/cigars/TEMPLATE_cigars_bilingual.md" 
            class="btn"
            aria-label="æŸ¥çœ‹é›ªèŒ„å“é‰´è®°å½•æ¨¡æ¿"
          >æŸ¥çœ‹æ¨¡æ¿</a>
        </div>
        <div class="template-card" role="listitem">
          <h3>çº¸çƒŸï½œCigarettes</h3>
          <p>é€‚ç”¨äºï¼šå·¥ä¸šå·çƒŸå“é‰´è®°å½•</p>
          <a 
            href="../notes/cigarettes/TEMPLATE_cigarettes_bilingual.md" 
            class="btn"
            aria-label="æŸ¥çœ‹çº¸çƒŸå“é‰´è®°å½•æ¨¡æ¿"
          >æŸ¥çœ‹æ¨¡æ¿</a>
        </div>
        <div class="template-card" role="listitem">
          <h3>çƒŸæ–—ï½œPipe</h3>
          <p>é€‚ç”¨äºï¼šçƒŸæ–—è‰å“é‰´è®°å½•</p>
          <a 
            href="../notes/pipe/TEMPLATE_pipe_bilingual.md" 
            class="btn"
            aria-label="æŸ¥çœ‹çƒŸæ–—å“é‰´è®°å½•æ¨¡æ¿"
          >æŸ¥çœ‹æ¨¡æ¿</a>
        </div>
        <div class="template-card" role="listitem">
          <h3>æ‰‹å·ï½œRYO</h3>
          <p>é€‚ç”¨äºï¼šæ‰‹å·çƒŸå“é‰´è®°å½•</p>
          <a 
            href="../notes/ryo/TEMPLATE_ryo_bilingual.md" 
            class="btn"
            aria-label="æŸ¥çœ‹æ‰‹å·çƒŸå“é‰´è®°å½•æ¨¡æ¿"
          >æŸ¥çœ‹æ¨¡æ¿</a>
        </div>
        <div class="template-card" role="listitem">
          <h3>å”‡çƒŸï½œSnus</h3>
          <p>é€‚ç”¨äºï¼šå£å«çƒŸå“é‰´è®°å½•</p>
          <a 
            href="../notes/snus/TEMPLATE_snus_bilingual.md" 
            class="btn"
            aria-label="æŸ¥çœ‹å”‡çƒŸå“é‰´è®°å½•æ¨¡æ¿"
          >æŸ¥çœ‹æ¨¡æ¿</a>
        </div>
        <div class="template-card" role="listitem">
          <h3>ç”µå­çƒŸï½œE-cig</h3>
          <p>é€‚ç”¨äºï¼šç”µå­çƒŸå“é‰´è®°å½•</p>
          <a 
            href="../notes/ecig/TEMPLATE_ecig_bilingual.md" 
            class="btn"
            aria-label="æŸ¥çœ‹ç”µå­çƒŸå“é‰´è®°å½•æ¨¡æ¿"
          >æŸ¥çœ‹æ¨¡æ¿</a>
        </div>
      </div>
      <div 
        class="template-links"
        role="navigation"
        aria-label="ç›¸å…³æ–‡æ¡£é“¾æ¥"
      >
        <a href="./contribute.md">å‚ä¸æŒ‡å—</a>
        <span aria-hidden="true">Â·</span>
        <a href="./style-guide.md">å†™ä½œæ ¼å¼</a>
        <span aria-hidden="true">Â·</span>
        <a href="../README.md#how-to-use--ä½¿ç”¨æ–¹å¼">ä½¿ç”¨è¯´æ˜</a>
      </div>
    </section>

    <section 
      id="sponsor" 
      class="animate sponsor-section" 
      aria-labelledby="sponsor-title"
      data-lazy-scripts="./js/a11y.js,./js/sponsor.js"
    >
      <div class="sponsor-container">
        <div class="sponsor-header">
          <h2 id="sponsor-title">â¤ï¸ èµåŠ©æ”¯æŒ</h2>
          <p class="sponsor-subtitle">å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¯·è€ƒè™‘èµåŠ©æ”¯æŒæˆ‘ä»¬çš„æŒç»­å‘å±•</p>
        </div>
        
        <div class="sponsor-impact">
          <h3>ä½ çš„æ”¯æŒå°†ç”¨äºï¼š</h3>
          <ul 
            class="sponsor-uses"
            role="list"
            aria-label="èµåŠ©ç”¨é€”"
          >
            <li><span class="impact-icon">ğŸ”§</span>ç»´æŠ¤è‡ªåŠ¨åŒ–è„šæœ¬ä¸ç«™ç‚¹</li>
            <li><span class="impact-icon">ğŸ“‹</span>æ”¹è¿›æ¨¡æ¿ä¸å·¥å…·</li>
            <li><span class="impact-icon">ğŸ‘¥</span>ç¤¾åŒºç»´æŠ¤ä¸å†…å®¹ç­–åˆ’</li>
          </ul>
        </div>

        <div class="sponsor-cta-section">
          <h3>é€‰æ‹©ä½ çš„èµåŠ©æ–¹å¼ï¼š</h3>
          
          <div class="sponsor-methods">
            <div class="sponsor-method">
              <div class="sponsor-method-header">
                <h4>ğŸ”— GitHub Sponsor</h4>
                <p>å®˜æ–¹èµåŠ©å¹³å°ï¼Œæ”¯æŒå®šæœŸèµåŠ©</p>
              </div>
              <a 
                href="https://github.com/sponsors/xianyu564" 
                class="btn btn-primary sponsor-btn"
                target="_blank"
                rel="noopener noreferrer"
                aria-label="é€šè¿‡ GitHub Sponsors èµåŠ©é¡¹ç›®"
              >
                ğŸ’– å¼€å§‹èµåŠ©
              </a>
            </div>

            <div class="sponsor-method">
              <div class="sponsor-method-header">
                <h4>ğŸ“± æ‰«ç èµåŠ©</h4>
                <p>å¾®ä¿¡æˆ–æ–°åŠ å¡ PayNow ä¸€æ¬¡æ€§èµåŠ©</p>
              </div>
              <button 
                class="btn btn-secondary sponsor-btn toggle-qr"
                aria-label="æ˜¾ç¤ºäºŒç»´ç "
                data-target="sponsor-qr-codes"
              >
                ğŸ“± æ˜¾ç¤ºäºŒç»´ç 
              </button>
            </div>
          </div>

          <div 
            id="sponsor-qr-codes"
            class="sponsors-qr hidden"
            role="region"
            aria-label="èµåŠ©äºŒç»´ç "
            aria-hidden="true"
          >
            <div class="qr-grid">
              <div class="qr-item">
                <img 
                  src="../.github/WeChat%20Sponsor%20Code.jpg" 
                  alt="å¾®ä¿¡èµåŠ©äºŒç»´ç " 
                  loading="lazy"
                  width="200"
                  height="200"
                />
                <span class="qr-label">å¾®ä¿¡æ”¯ä»˜</span>
              </div>
              <div class="qr-item">
                <img 
                  src="../.github/SG%20PayNow%20Sponsor%20Code.jpg" 
                  alt="æ–°åŠ å¡ PayNow èµåŠ©äºŒç»´ç " 
                  loading="lazy"
                  width="200"
                  height="200"
                />
                <span class="qr-label">PayNow (SG)</span>
              </div>
            </div>
          </div>
        </div>

        <div class="sponsor-footer">
          <p class="sponsor-note">
            <a 
              href="./sustainability.md"
              aria-label="äº†è§£æ›´å¤šå…³äºé¡¹ç›®å¯æŒç»­æ€§å‘å±•è®¡åˆ’"
            >äº†è§£æ›´å¤šå…³äºé¡¹ç›®å¯æŒç»­æ€§å‘å±• â†’</a>
          </p>
          <div class="sponsor-thanks">
            <small>æ„Ÿè°¢æ¯ä¸€ä½èµåŠ©è€…çš„æ”¯æŒï¼ğŸ™</small>
          </div>
        </div>
      </div>
    </section>

    <section 
      id="contributors-preview"
      class="animate"
      aria-labelledby="contributors-preview-title"
      data-lazy-scripts="./js/contributors.js"
    >
      <h2 id="contributors-preview-title">ğŸ‘¥ è´¡çŒ®è€…</h2>
      <div id="contributors-widget" aria-live="polite">
        <div class="loading-placeholder">
          <p>æ­£åœ¨åŠ è½½è´¡çŒ®è€…ä¿¡æ¯...</p>
        </div>
      </div>
    </section>
  </main>

  <footer class="site-footer" role="contentinfo">
    <div 
      class="footer-links"
      role="navigation"
      aria-label="é¡µè„šå¯¼èˆª"
    >
      <a href="./sustainability.md" aria-label="äº†è§£é¡¹ç›®ä¸ºçˆ±å‘ç”µçš„ç†å¿µ">ä¸ºçˆ±å‘ç”µ</a>
      <span aria-hidden="true">Â·</span>
      <a href="./contribute.md" aria-label="äº†è§£å¦‚ä½•å‚ä¸é¡¹ç›®">å¦‚ä½•å‚ä¸</a>
      <span aria-hidden="true">Â·</span>
      <a href="./style-guide.md" aria-label="æŸ¥çœ‹ç¬”è®°å†™ä½œæ ¼å¼æŒ‡å—">å†™ä½œæ ¼å¼</a>
      <span aria-hidden="true">Â·</span>
      <a href="./glossary.md" aria-label="æŸ¥çœ‹æœ¯è¯­è¡¨">æœ¯è¯­è¡¨</a>
      <span aria-hidden="true">Â·</span>
      <a href="./contributors.html" aria-label="æŸ¥çœ‹é¡¹ç›®è´¡çŒ®è€…åˆ—è¡¨">è´¡çŒ®è€…</a>
      <span aria-hidden="true">Â·</span>
      <a href="./tasks.md" aria-label="æŸ¥çœ‹å¼€æ”¾ä»»åŠ¡åˆ—è¡¨">å¼€æ”¾ä»»åŠ¡</a>
    </div>
    <div 
      class="footer-feeds"
      role="navigation"
      aria-label="è®¢é˜…æº"
    >
      <span>ğŸ“¡ è®¢é˜…æ›´æ–°ï¼š</span>
      <a href="./feed.xml" type="application/rss+xml" aria-label="RSS è®¢é˜… - æœ€æ–°çƒŸè‰ç¬”è®°æ›´æ–°" title="RSS 2.0 è®¢é˜…æº">
        <img src="./assets/feed-icon.svg" alt="RSS" width="16" height="16" style="vertical-align: middle; margin-right: 4px;">
        RSS
      </a>
      <span aria-hidden="true">Â·</span>
      <a href="./feed.atom" type="application/atom+xml" aria-label="Atom è®¢é˜… - æœ€æ–°çƒŸè‰ç¬”è®°æ›´æ–°" title="Atom 1.0 è®¢é˜…æº">
        <img src="./assets/feed-icon.svg" alt="Atom" width="16" height="16" style="vertical-align: middle; margin-right: 4px;">
        Atom
      </a>
      <span aria-hidden="true">Â·</span>
      <a href="./feed.json" type="application/json" aria-label="JSON Feed è®¢é˜… - æœ€æ–°çƒŸè‰ç¬”è®°æ›´æ–°" title="JSON Feed 1.1 è®¢é˜…æº">
        <img src="./assets/feed-icon.svg" alt="JSON" width="16" height="16" style="vertical-align: middle; margin-right: 4px;">
        JSON Feed
      </a>
    </div>
    <small 
      class="footer-meta"
      role="contentinfo"
      aria-label="ç‰ˆæƒå’Œå¥åº·æç¤º"
    >
      å†…å®¹é‡‡ç”¨ CC BY 4.0 æˆæƒï¼›ä»£ç é‡‡ç”¨ MIT è®¸å¯è¯
      <br>
      <strong>å¥åº·æç¤ºï¼š</strong>æ‰€æœ‰å½¢å¼çš„çƒŸè‰ä½¿ç”¨å‡æœ‰å®³å¥åº·ã€‚æœ¬ç«™ä»…ç”¨äºè®°å½•ä¸äº¤æµï¼Œä¸é¼“åŠ±ä½¿ç”¨ã€‚
    </small>
  </footer>

  <script>
    // æ ¸å¿ƒåŠŸèƒ½
    async function loadJSON(path) {
      const res = await fetch(path);
      if (!res.ok) return [];
      return await res.json();
    }

    // GitHub ä»“åº“é“¾æ¥å¤„ç†
    function computeRepoUrls() {
      const parts = (location.pathname || '/').split('/').filter(Boolean);
      let owner = '';
      let repo = '';
      if (parts.length >= 2) {
        owner = parts[0];
        repo = parts[1];
      }
      if (!owner || !repo) return null;
      const base = `https://github.com/${owner}/${repo}`;
      return {
        repo: base,
        one: `${base}/issues/new?template=quick.yml`,
        form: `${base}/issues/new?template=tasting.yml`
      };
    }

    // DOM è¾…åŠ©å‡½æ•°
    function el(tag, attrs={}, children=[]) {
      const e = document.createElement(tag);
      Object.entries(attrs).forEach(([k,v])=> e.setAttribute(k, v));
      children.forEach(c=> e.appendChild(typeof c === 'string'? document.createTextNode(c): c));
      return e;
    }

    // ç¬”è®°é¡¹æ¸²æŸ“
    function noteItem(n) {
      const a = el('a', { 
        href: `../${n.path}`,
        target: '_blank',
        rel: 'noopener',
        title: n.title
      }, [n.title]);

      const copyBtn = el('button', {
        class: 'copy',
        'aria-label': 'å¤åˆ¶é“¾æ¥'
      }, ['å¤åˆ¶é“¾æ¥']);

      copyBtn.addEventListener('click', async (e) => {
        e.preventDefault();
        const url = location.origin + '/' + location.pathname.split('/').filter(Boolean).slice(0,2).join('/') + '/' + n.path;
        try {
          await navigator.clipboard.writeText(url);
          copyBtn.textContent = 'å·²å¤åˆ¶';
          setTimeout(()=> copyBtn.textContent='å¤åˆ¶é“¾æ¥', 1200);
        } catch(e) {
          console.error('Copy failed:', e);
        }
      });

      const author = n.author ? ` @${n.author}` : '';
      
      return el('li', {}, [
        el('span', { class: 'date' }, [n.date + ' ']),
        el('span', { class: 'cat' }, ['['+n.category+'] ']),
        a,
        el('span', { class: 'author'}, [author]),
        copyBtn
      ]);
    }

    // åˆå§‹åŒ–
    (async () => {
      // è®¾ç½®ä»“åº“é“¾æ¥
      const urls = computeRepoUrls();
      const aOne = document.getElementById('link-one');
      const aQuick = document.getElementById('link-quick');
      const aForm = document.getElementById('link-form');
      const aRepo = document.getElementById('link-repo');
      
      if (urls) {
        [aOne, aQuick].forEach(a => a.href = urls.one);
        aForm.href = urls.form;
        aRepo.href = urls.repo;
      } else {
        [aOne, aQuick].forEach(a => a.href = '../issues/new?template=quick.yml');
        aForm.href = '../issues/new?template=tasting.yml';
        aRepo.href = '../../';
      }

      // åŠ è½½æ•°æ®
      const latest = await loadJSON('./data/latest.json');
      const all = await loadJSON('./data/index.json');
      
      // æ¸²æŸ“æœ€æ–°åˆ—è¡¨
      const latestList = document.getElementById('latest-list');
      let current = latest.slice();
      
      function renderLatest(list, replace = true) {
        if (replace) {
          latestList.innerHTML = '';
        }
        list.forEach(n => latestList.appendChild(noteItem(n)));
      }
      
      renderLatest(current);

      // æœç´¢åŠŸèƒ½
      const input = document.getElementById('q');
      const dropdown = document.querySelector('.search-dropdown');
      
      input.addEventListener('input', () => {
        const v = input.value.trim().toLowerCase();
        if (!v) {
          renderLatest(latest);
          dropdown.hidden = true;
          return;
        }
        
        const filtered = latest.filter(n =>
          (n.title || '').toLowerCase().includes(v) ||
          (n.category || '').toLowerCase().includes(v) ||
          (n.author || '').toLowerCase().includes(v)
        );
        
        renderLatest(filtered);
      });

      // åˆ†ç±»ç»Ÿè®¡
      const catOrder = ['cigars','cigarettes','pipe','ryo','snus','ecig'];
      const counts = Object.fromEntries(catOrder.map(c=>[c,0]));
      all.forEach(n => { if (counts[n.category] !== undefined) counts[n.category]++; });
      
      const catSummary = document.getElementById('cat-summary');
      catSummary.innerHTML = '';
      catOrder.forEach(c => {
        const badge = el('a', {
          class: 'badge',
          href: `#${c}`,
          'data-category': c
        }, [`${c}: ${counts[c]}`]);
        catSummary.appendChild(badge);
      });

      // åˆ†ç±»åˆ—è¡¨
      const byCat = {};
      all.forEach(n => (byCat[n.category] = byCat[n.category] || []).push(n));
      
      const container = document.getElementById('by-category');
      Object.keys(byCat).forEach(cat => {
        const section = el('div', {
          class: 'category-block animate',
          id: cat
        }, [
          el('h3', {}, [
            cat,
            el('span', { class: 'count' }, [` (${byCat[cat].length})`])
          ])
        ]);
        
        const ul = el('ul', { class: 'note-list' });
        byCat[cat].slice(0, 50).forEach(n => ul.appendChild(noteItem(n)));
        
        if (byCat[cat].length > 50) {
          const more = el('button', {
            class: 'btn load-more',
            'data-category': cat
          }, [`åŠ è½½æ›´å¤š ${cat} ç¬”è®°`]);
          
          more.addEventListener('click', () => {
            const start = ul.children.length;
            const next = byCat[cat].slice(start, start + 50);
            next.forEach(n => ul.appendChild(noteItem(n)));
            if (start + 50 >= byCat[cat].length) {
              more.hidden = true;
            }
          });
          
          section.appendChild(ul);
          section.appendChild(more);
        } else {
          section.appendChild(ul);
        }
        
        container.appendChild(section);
      });
    })();
  </script>
</body>
</html>